## Macros for displaying a single item

#macro( eldaItem $hnode )
  #showRdfResource( $hnode, "section", "outer" )
#end

## Display an RDF resource
#macro( showRdfResource $hnode, $elem, $level )
  #set( $resource = $hnode.rdfNode() )
  <$elem class="rdf resource $level">
    <div class="row">
      #itemName( $resource, $level )
      #itemURI( $resource, $level )
      #itemTypes( $resource, $level )
      #itemProperties( $hnode, $level )
    </div>
  </$elem>
#end

#macro( selectHLevel $level $hOuter $hInner )
  #if( $level.equals( "outer" ) )
    #set( $h = $hOuter)
  #else
    #set( $h = $hInner)
  #end
#end

## Display the name of the resource
#macro( itemName $resource, $level )
  #selectHLevel( $level, "h1", "h3" )
  <div class="col-md-12">
    <$h class="resource-label">$resource.getName()</$h>
  </div>
#end

## Display the item URI
#macro( itemURI $resource )
  #selectHLevel( $level, "h2", "h4" )
  <div class="col-md-12">
    <$h class="resource-uri"><a href="$resource.getURI()">$resource.getURI()</a></$h>
  </div>
#end

## Display a list of types for the resource, if any are known
#macro( itemTypes $resource )
  #set( $types = $resource.types() )
  #set( $sep = "" )
  #if( $types.size() > 0 )
    <div class="col-md-12">
      <div class="resource-types">
        a
        <ul class="list-inline">
          #foreach( $type in $types )
            <li>
              $sep
              <a href="$type.getURI()">$type.getName()</a>
            </li>
            #set( $sep = ", " )
          #end
        </ul>
      </div>
    </div>
  #end
#end

## Show the various properties of the item
#macro( itemProperties $hNode )
  #if( $hNode.children().size() > 0)
    <div class="col-md-12">
      <ul class="resource-properties">
        #foreach( $childNode in $hNode.children() )
          <li class="$childNode.hintsString()">
            #set( $pred = $childNode.terminalLink() )
            #propertyPredicate( $pred )
            #propertyValue( $childNode )
          </li>
        #end
      </ul>
    </div>
  #end
#end

## Show the predicate of a property-value
#macro( propertyPredicate $p )
  <div class="rdf predicate">
    <a href="$p.getURI()">$p.getName()</a>
  </div>
#end

## Determine how to present a property value - single item or list?
#macro( propertyValue $node )
  #if( $node.hasSiblings() )
    #propertyMultiValue( $node )
  #else
    #propertySingleValue( $node )
  #end
#end

## Single value of a property
#macro( propertySingleValue $node )
  #propertyObject( $node, "first" )
#end

## List value of a property
#macro( propertyMultiValue $node )
  <ul class="rdf object multiple">
    <li class="first">
      #propertyObject( $node )
    </li>
    #foreach( $sibling in $node.siblings())
      <li class="$sibling.hintsString()">
        #propertyObject( $sibling )
      </li>
    #end
  </ul>
#end

## Show the value of a property-value
#macro( propertyObject $node $hint )
  #if( $node.rdfNode().isLiteral() )
    #propertyObjectLiteral( $node.rdfNode(), $hint )
  #else
    #propertyObjectResource( $node, $hint )
  #end
#end

## Show a literal-value
#macro( propertyObjectLiteral $lit $hint )
  <div class="rdf object literal $hint">
    $lit.getLexicalForm()
  </div>
#end

## Show a resource-value
#macro( propertyObjectResource $node $hint )
  <div class="rdf object $hint">
    #showRdfResource( $node, "div", "nested" )
  </div>
#end
