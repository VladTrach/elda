#
# A hello-world config. 
#

# Assorted prefix declarations. Some of them are for the structuring
# of the API config, others are for the vocabulary definitions.
#

@prefix api:                <http://purl.org/linked-data/api/vocab#> .
@prefix dct:				<http://purl.org/dc/terms/> .

@prefix rdf:                <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:               <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd:                <http://www.w3.org/2001/XMLSchema#> .

# The elda namespace/prefix is for Elda extensions to the LDA specification.
@prefix elda:               <http://www.epimorphics.com/vocabularies/lda#> .

# Prefix for example-local entities.
@prefix hello:				<http://elda.googlecode.com/hg/vocabs/games#>.

# ---------------------------------------------------------------------
# API config

hello:hello-world-again a api:API 
	; rdfs:label "Hello World example #2 -- games"@en
	# Name the SPARQL endpoint which supplies the data we present
	; api:sparqlEndpoint <local:data/example-data.ttl>
	# ; api:sparqlEndpoint <http://localhost:3030/ds/query>
	; api:defaultViewer api:labelledDescribeViewer
	; api:viewer [a api:Viewer; api:name "none"; api:properties ""]
	# ; api:variable [api:name "_velocityRoot"; api:value "http://localhost:8080/standalone/lda-assets/vm/"]
	; api:variable [api:name "_resourceRoot"; api:value "http://localhost:8080/standalone/lda-assets/"]
	; api:endpoint 
		hello:publishers, hello:games 
	; api:formatter
		[a elda:VelocityFormatter
		; api:name "vhtml"
		; elda:className "com.epimorphics.lda.renderers.VelocityRendererFactory"
		; api:mimeType "text/html"
		; api:stylesheet "page-shell.vm"
		]
	; api:formatter
		[ a api:XsltFormatter 
		; api:name "html" 
		; api:mimeType "text/html; charset=utf-8" 
		; api:stylesheet "lda-assets/xslt/result-osm-trimmed.xsl"
		# ; elda:shortnameMode elda:roundTrip
		]
    ; api:formatter
        [a elda:FeedFormatter
        ; api:name "atom"
        ; elda:className "com.epimorphics.lda.renderers.FeedRendererFactory"
        ; api:mimeType "application/atom+xml"
        ; elda:feedTitle "an example Elda feed"
        ]
	.
	
<http://localhost:3030/ds/query> 
    elda:textSearchOperand (rdfs:label "?_search" 99)
    .
    
hello:hello-world-again a api:API
    ; elda:rewriteResultURIs
        [ elda:ifStarts "http://elda.googlecode.com/hg/vocabs/games#"
        ; elda:replaceStartBy "http://localhost:8080/standalone/again/vocabulary/"
        ]
    ; api:endpoint 
        [ a api:ItemEndpoint
        ; rdfs:label "Vocabulary"
        ; api:uriTemplate "/vocabulary/{localname}"
        ; api:itemTemplate "http://elda.googlecode.com/hg/vocabs/games#{localname}"
        ]
    .

# Endpoint definitions

hello:publishers a api:ListEndpoint 
	; rdfs:label "Publishers" 
	; api:uriTemplate "/publishers" 
	; api:selector [api:filter "type=Publisher"; api:sort "label"]
	; api:defaultViewer api:labelledDescribeViewer
	.	
	
hello:games a api:ListEndpoint 
	; rdfs:label "Games" 
	; api:uriTemplate "/games" 
	; api:selector [api:filter "type=BoardGame"; api:sort "label"]
	; api:defaultViewer api:labelledDescribeViewer
	.	
	
hello:BoardGame a rdfs:Class
	; rdfs:label "Board Game"
	; api:label "BoardGame"
	.
	
hello:players a rdf:Property
	; api:label "players"
	; rdfs:range xsd:int
	.
	
hello:Publisher a rdfs:Class
	; api:label "Publisher"
	.
	
dct:publisher a rdf:Property
	; api:label "publishes"
	.
	
rdfs:label a rdf:Property
	; api:multiValued true
	; api:label "label"
	.
	
rdf:type a rdf:Property
    ; api:multiValued true 
    ; rdfs:range rdfs:Class 
	; api:label "type"
	.
hello:designed-by a rdf:Property
	; api:label "designedBy"
	.
	
hello:designer-of a rdf:Property
	; api:label "designerOf"
	.
	
hello:pubDate a rdf:Property
	; api:label "publicationDate"
	; rdfs:range xsd:integer
	.
	

		
