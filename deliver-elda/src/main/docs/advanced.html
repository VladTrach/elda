<html>
<head>
<title>Elda -- an implementation of the Linked Data API</title>
<link href="style.css" type="text/css" rel="stylesheet"></link>
</head>
<body>

<div class="main">

<div class="heading">
<a href="http://www.epimorphics.com">
<img class="logo" src="epilogo-240.png">
</a>
<h1>Elda</h1>
<h2>An implementation of the Linked Data API</h2>
</div>

<h1>Additional Elda features</h1>

<h2>Configuration variables</h2>

<p>
    Elda reserves LDA variable names that begin "_" for
    configuration purposes.
</p>

<h3>Variables used by the stylesheet</h3>

<p>
    The built-in Elda stylesheet generates HTML pages
    that require http access to images, CSS stylesheets,
    and Javascript served by the Elda server. Because
    the webapp root isn't fixed, the stylesheet reads
    location information from LDA variables that are
    set as part of creating an Elda webapp.
</p>

<ul>
    <li>_resourceRoot: the location from which the
    resources will be served, relative to the server
    root. May include a domain:port if the resources
    are on a different server.
    </li>

    <li>activeImageBase: the location within the
    resource root where the active (enabled) images
    used by the stylesheet are fetched from.
    </li>

    <li>inactiveImageBase: the location within the
    resource root where the inactive (disabled) images
    used by the stylesheet are fetched from.
    </li>

</ul>

<h3>Variables used by the Elda code</h3>

<ul>
    <li>_strip_has: (OBSOLESCENT) If this variable is defined
    and has the value "yes", the XML renderer will rename
    properties "hasWhatever" (ie where the fourth character
    is upper-case) to "whatever". This is for compatability
    with Puelia when using a Puelia-specific stylesheet.
    </li>

    <li>_suppress_media_type: If there is no .formatter
    suffix in the request URL, and no _format= query
    parameter, then the prescribed LDA behaviour is to
    see if the request headers specify an appropriate
    media type. If the requesting entity is a browser
    it almost always will (with */*), which is inconvenient
    when testing for the default default behaviour of
    sending JSON. Setting this variable to "yes" will
    cause Elda to ignore the supplied media type.
    </li>
</ul>

<h2>wildcard '*' in view property chains</h2>

<p>
    A property chain appearing in a view specification
    may contain the special element '*', meaning "any
    property". In the generated query it is replaced by
    a fresh variable. There can be any number of *-elements,
    anywhere within the chain.
</p>

<h2>api:base</h2>

<p>
    An LDA configuration may specify an api:base property.
    This should, if possible, be used to specify where 
    the Elda webapp is served from. If specified, all
    Elda's constructed URIs (such as those for different
    views or formats of the displayed page) will use
    that base URI with the path and query parameters
    supplied in the request. This means that a server
    at location A can generate URIs as though it were
    at location B (from which it may have been redirected). 
</p>

<h2>SPARQL 1.1 features</h2>

<p>
    Some generated queries -- those that have view defined by
    property chains and are applied to many selected items -- 
    are rather large (exceeding a megabyte). These queries are
    repetitions of the view property accesses specialised by
    the selected item. If the SPARQL server supports nested
    selects (part of, but not limited to, SPARQL 1.1), then
    these repetitions can be replaced by a single application
    of the view wrapped round a nested select that fetches
    the items.
</p>

<p>
    Elda automatically uses nested selects if the data source 
    is a <b>local:</b> or <b>tdb:</b> model, or it the
    <code>sparqEndpoint</code> value of the API is a
    resource with an <b>extras:supportsNestedSelects</b>
    value of true, "true", or "yes". (We anticipate that
    later versions of Elda will dynamically check the server
    to see if nested selects work.)
</p>

<h2>configuration rendering</h2>

<p>
    Elda provides the api:base-relative URI path <code>/api-config</code>.
    Browsing this URI delivers a rendering of the various APIs that
    the Elda instance provides. Each API description shows the
    different endpoints, with their variable bindings and named views,
    and the dictionary of shortnames appropriate to this endpoint.
    By default the descriptions are hidden (for compactness) and
    are revealed by clicking on the section titles.
</p>

<p>
    The api:base-relative URI path 
    <code>/meta/<span style='color: blue'>some/uri/template</span></code>
    provides the same configuration description as <code>/api-config</code>,
    but the API and endpoint for 
    <span style='color: blue'>some/uri/template</span>
    are already opened.
</p>

<h2>statistics</h2>

<p>
    The api:base-relative URI path <code>/control/show-stats</code> displays
    statistics about the queries that this Elda instance has handled, including:
</p>

<ul>
    <li>the total number of requests made</li>
    <li>the number of requests that failed</li>
    <li>the number of selection cache hits</li>
    <li>the number of view cache hits</li>
</ul>

<p>
    (Elda maintains two internal caches, one mapping the computed selection
    query to the list of items it generates, the other mapping (list of
    item, view) pairs to generated result sets. These are independant of
    any caches provided by <i>eg</i> an Apache server wrapping Elda.)
</p>

<ul>
    <li>the elapsed time dealing with all requests</li>
    <li>the elapsed time taken for item-selection queries</li>
    <li>the elapsed time taken for view-display queries</li>
    <li>the elapsed time taken to render an Elda result</li>
    <li>any remaining non-query non-rendering time</li>
</ul>

<p>
    All of these results show the total time, the mean time over all
    requests, and the maximum and minimum times over all requests.
</p>

<ul>
    <li>the size of the rendered results</li>
    <li>the size of the select queries</li>
    <li>the size of the view queries</li>
</ul>

<p>
    All of these results show the total size (in [kilo-]bytes),
    and the mean, maximum, and minimum over all requests.
</p>

<p>
    The display also breaks down rendering sizes and times by
    the rendering format (ie JSON/XML/HTML ...).
</p>

<h2>Building Elda</h2>

<p>


</p>

<div class="footer">
<hr>
&copy; Copyright 2011 Epimorphics Limited. For licencing conditions see
<a href="http://elda.googlecode.com/hg/LICENCE.html">http://elda.googlecode.com/hg/LICENCE.html</a>.
</div>
</div>

</body>
</html>

